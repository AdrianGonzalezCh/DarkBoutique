<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/plantilla :: head('Dark Boutique - Carrito de Compras')}"></head>
<body>
    <!-- Incluimos el fragmento HEADER -->
    <div th:replace="~{layout/plantilla :: header}"></div>
    
    <!-- Contenido específico del Carrito de Compras -->
    <main>
        <h2>Carrito de Compras</h2>
        <!-- Verifica si cartItems es null o vacío -->
        <div th:if="${#lists.isEmpty(cartItems)}">
            <p>El carrito está vacío.</p>
        </div>
        <div th:unless="${#lists.isEmpty(cartItems)}">
            <table>
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Precio</th>
                        <th>Cantidad</th>
                        <th>Subtotal</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="item : ${cartItems}">
                        <td th:text="${item.producto.nombre}">Producto</td>
                        <td th:text="${item.producto.precio}">0.00</td>
                        <td>
                            <input type="number" th:value="${item.cantidad}" />
                        </td>
                        <td th:text="${item.subtotal}">0.00</td>
                        <td>
                            <form th:action="@{/cart/remove}" method="post">
                                <input type="hidden" name="productoId" th:value="${item.producto.id}" />
                                <button type="submit" class="btn">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p>Total: $<span th:text="${total}">0.00</span></p>
            <a th:href="@{/checkout}" class="btn">Procesar Pago</a>
        </div>
    </main>
    
    <!-- Incluimos el fragmento FOOTER -->
    <div th:replace="~{layout/plantilla :: footer}"></div>
</body>
</html>
