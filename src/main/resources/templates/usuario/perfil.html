<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{layout/plantilla :: head('Dark Boutique – Perfil de Usuario')}"></head>
<body>
  <!-- HEADER común -->
  <div th:replace="~{layout/plantilla :: header}"></div>

  <!-- FLASH MESSAGE común -->
  <div th:replace="~{layout/plantilla :: flash}"></div>

  <!-- CONTENIDO ESPECÍFICO -->
  <main class="container my-4" th:fragment="mainContent">
    <h2 th:text="'Perfil de ' + ${usuario.username}">Perfil de Usuario</h2>

    <p>
      <strong>Email:</strong>
      <span th:text="${usuario.email}">usuario@email.com</span>
    </p>
    <p>
      <strong>Puntos:</strong>
      <span th:text="${usuario.points}">0</span>
    </p>

    <!-- Recomendaciones -->
    <div class="recommendations mt-5"
         th:if="${recommendedProducts != null and #lists.isNotEmpty(recommendedProducts)}">
      <h3>Recomendaciones para ti</h3>
      <div class="row row-cols-1 row-cols-md-3 g-4">
        <div th:each="p : ${recommendedProducts}" class="col">
          <div class="card h-100">
            <img th:src="@{${p.imagenUrl}}"
                 th:alt="${p.nombre}"
                 class="card-img-top"/>
            <div class="card-body d-flex flex-column">
              <h5 class="card-title" th:text="${p.nombre}">Nombre</h5>
              <p class="card-text mt-auto">
                Precio: $
                <span th:text="${p.precio}">0.00</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Notificaciones -->
    <div class="notifications mt-5"
         th:if="${notifications != null and #lists.isNotEmpty(notifications)}">
      <h3>Alertas</h3>
      <ul class="list-group">
        <li th:each="notif : ${notifications}"
            class="list-group-item"
            th:text="${notif.message}">
          Mensaje de alerta
        </li>
      </ul>
    </div>

    <!-- Seguimiento de pedidos -->
    <div class="orders-tracking mt-5"
         th:if="${ordenes != null and #lists.isNotEmpty(ordenes)}">
      <h3>Seguimiento de tus pedidos</h3>
      <ul class="list-group">
        <li th:each="orden : ${ordenes}"
            class="list-group-item">
          Pedido #
          <span th:text="${orden.id}">1234</span>:
          <span th:text="${orden.trackingStatus}">En camino</span>
        </li>
      </ul>
    </div>
  </main>

  <!-- FOOTER común -->
  <div th:replace="~{layout/plantilla :: footer}"></div>
</body>
</html>
